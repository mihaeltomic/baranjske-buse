import { ImageResponse } from "next/og";
import { readFile } from "node:fs/promises";
import { join } from "node:path";

export const alt = "Baranjske buše — Masked ritual of Croatian Baranja";
export const size = { width: 1200, height: 630 };
export const contentType = "image/png";

export default async function OGImage() {
  const fontPath = join(process.cwd(), "src/app/fonts/NAMU-1910.ttf");
  const fontData = await readFile(fontPath);

  return new ImageResponse(
    (
      <div
        style={{
          width: "100%",
          height: "100%",
          display: "flex",
          flexDirection: "column",
          alignItems: "center",
          justifyContent: "center",
          background: "#000",
          fontFamily: "NAMU",
          position: "relative",
        }}
      >
        {/* Subtle radial glow */}
        <div
          style={{
            position: "absolute",
            inset: 0,
            display: "flex",
            background:
              "radial-gradient(ellipse 70% 60% at 50% 50%, rgba(60,35,10,0.5) 0%, transparent 70%)",
          }}
        />

        {/* Mask icon */}
        <svg
          width="100"
          height="128"
          viewBox="0 0 118.464 150.844"
          fill="none"
          style={{ marginBottom: 36, opacity: 0.85 }}
        >
          <path d="M11.0697 6.959C11.6603 4.8966 12.7307 2.92987 14.6054 1.76466C16.5647 0.546748 19.3828-0.373974 21.6846 0.150464C22.4365 0.351866 23.7629 0.671036 24.3915 1.09428C25.1093 1.46095 25.8985 1.89679 26.5198 2.41515C27.0172 2.66958 27.9706 3.10597 28.2837 3.51087L28.3625 3.91644C29.8097 5.07502 30.3389 6.60801 30.7481 8.38361C30.8682 9.02206 31.1509 10.3324 31.1373 10.9116C31.1413 11.827 31.2025 12.8517 30.9095 13.7168C30.8771 14.4156 30.325 15.9378 29.8756 16.4575C29.5326 17.1477 29.2334 17.4892 28.7589 18.0837L28.0356 18.7185C27.0986 19.5347 26.0093 20.172 24.8107 20.5173C24.4295 20.6552 23.9953 20.8246 23.6149 20.9465L23.1907 20.9863C22.912 21.1859 20.4642 21.0256 20.0906 20.9108C19.465 20.7334 18.748 20.5546 18.1609 20.2925L17.9901 20.2453C17.2378 19.9429 16.9118 19.8166 16.2163 19.3681L15.9702 19.1806C14.8493 18.4215 14.3276 18.0673 13.4511 17.0242C13.0982 16.7091 12.944 16.416 12.695 16.0161C12.2406 15.5652 11.6436 14.0742 11.3828 13.4515C11.2717 13.2589 11.1251 12.7831 11.0447 12.5508C10.6674 10.8164 10.6663 9.97924 10.8026 8.24507C10.8345 7.94225 10.9982 7.28458 11.0697 6.959Z" fill="rgba(201,168,76,0.9)"/>
          <path d="M103.856 0.982427C106.043 0.0199429 109.503-0.237364 111.738 0.646239C114.835 1.87 116.343 3.98588 117.145 7.1408C117.343 7.74876 117.346 9.52757 117.229 10.1385C117.162 10.6563 117.077 11.4976 116.959 11.9805C116.818 12.3998 116.581 13.1824 116.386 13.5402C116.243 13.8309 116.074 14.2398 115.855 14.4587C115.529 15.4222 115.08 15.9003 114.42 16.6619C112.902 18.348 111.24 19.7767 108.881 20.1126C104.779 21.2583 100.784 19.4837 98.5741 15.9052C96.2065 12.0717 97.264 5.22323 101.25 2.87668C101.809 2.04324 102.981 1.42765 103.856 0.982427Z" fill="rgba(201,168,76,0.9)"/>
          <path d="M63.7405 83.5034C63.3844 81.4894 64.5931 80.8342 64.4357 78.9163C64.4004 78.4877 64.4631 78.2314 64.745 77.9475L64.9205 77.9729C65.0911 78.6114 64.7207 79.1793 64.9 79.5891C65.5846 79.113 65.3458 79.3759 65.7191 78.5054C66.7687 78.4092 67.4617 77.2106 68.1431 77.2338C68.5329 78.1761 69.4194 78.3043 70.074 78.9826C70.3258 79.2434 70.7244 80.0156 70.8898 80.3636C71.2387 81.517 71.6082 81.6695 71.0612 82.7809C71.193 83.2272 71.3324 83.7973 71.5698 84.1817C68.6991 87.2497 65.7991 87.5524 63.7405 83.5034Z" fill="rgba(201,168,76,0.9)"/>
          <path d="M50.8763 82.9797C50.1738 81.4585 52.0916 79.2047 53.3802 78.5352C54.2938 78.0613 54.4214 78.3397 55.2627 78.6402C55.9765 79.1981 56.3532 79.5052 56.9761 80.1968C55.8814 84.0425 54.3745 86.5206 50.0377 84.638C50.3157 84.0149 50.543 83.5752 50.8763 82.9797Z" fill="rgba(201,168,76,0.9)"/>
          <path d="M45.7411 38.6394C44.3618 38.3252 42.6731 38.8765 41.4989 39.6062C40.3755 40.3045 39.7337 41.4836 39.3798 42.7195C39.3369 42.9147 39.2387 43.3086 39.2196 43.49C39.138 44.5292 39.1391 45.0308 39.3651 46.0701C39.4133 46.2093 39.5007 46.4947 39.5673 46.6101C39.7235 46.9834 40.0811 47.877 40.3534 48.1473C40.5025 48.3868 40.5953 48.5621 40.8065 48.7508C41.3318 49.3759 41.6445 49.5888 42.3163 50.0437L42.4638 50.156C42.8805 50.4248 43.0764 50.5002 43.5272 50.6814L43.6298 50.7098C43.9815 50.8668 44.4113 50.9736 44.786 51.0799C45.0105 51.1486 46.4755 51.2451 46.6434 51.1258L46.8974 51.1014C47.1252 51.0284 47.3858 50.9271 47.6141 50.8445C48.3324 50.6376 48.9853 50.2555 49.5468 49.7664L49.9804 49.3855C50.2645 49.0296 50.4439 48.8251 50.6493 48.4119C50.9186 48.1005 51.2499 47.1882 51.2694 46.7693C51.445 46.2509 51.4085 45.6363 51.4061 45.0877C51.4142 44.7405 51.2447 43.9556 51.1727 43.573C50.9275 42.5091 50.6101 41.5906 49.7431 40.8963L49.6952 40.6531C49.5075 40.4105 48.9366 40.1483 48.6386 39.9959C48.2663 39.6853 47.7932 39.4246 47.3632 39.2049C46.9865 38.9513 46.1918 38.7601 45.7411 38.6394Z" fill="rgba(201,168,76,0.9)"/>
          <path d="M99.7079 38.9363C98.3686 38.4068 96.2949 38.5608 94.9843 39.1375C94.4598 39.4043 93.7578 39.7738 93.4227 40.2732C91.0341 41.6795 90.3994 45.7835 91.8182 48.0808C93.1425 50.2252 95.5369 51.2886 97.995 50.6023C99.4085 50.4011 100.405 49.5444 101.314 48.534C101.71 48.0775 101.979 47.791 102.175 47.2137C102.306 47.0824 102.407 46.837 102.493 46.6629C102.61 46.4483 102.752 45.9794 102.836 45.7283C102.907 45.4389 102.958 44.9351 102.998 44.6248C103.068 44.2587 103.067 43.1923 102.948 42.8279C102.467 40.9375 101.563 39.6697 99.7079 38.9363Z" fill="rgba(201,168,76,0.9)"/>
        </svg>

        {/* Title */}
        <div
          style={{
            fontSize: 64,
            color: "rgba(201,168,76,0.9)",
            letterSpacing: "0.06em",
            textAlign: "center",
            lineHeight: 1.1,
            display: "flex",
          }}
        >
          Baranjske buše
        </div>

        {/* Subtitle */}
        <div
          style={{
            fontSize: 22,
            color: "rgba(255,255,255,0.4)",
            letterSpacing: "0.25em",
            textTransform: "uppercase",
            marginTop: 20,
            display: "flex",
          }}
        >
          The masked rite of Croatian Baranja
        </div>

        {/* Bottom rule */}
        <div
          style={{
            position: "absolute",
            bottom: 40,
            display: "flex",
            alignItems: "center",
            gap: 16,
          }}
        >
          <div
            style={{
              width: 40,
              height: 1,
              background: "rgba(201,168,76,0.3)",
              display: "flex",
            }}
          />
          <div
            style={{
              fontSize: 11,
              color: "rgba(201,168,76,0.3)",
              letterSpacing: "0.35em",
              textTransform: "uppercase",
              display: "flex",
            }}
          >
            Est. Antiquity
          </div>
          <div
            style={{
              width: 40,
              height: 1,
              background: "rgba(201,168,76,0.3)",
              display: "flex",
            }}
          />
        </div>
      </div>
    ),
    {
      ...size,
      fonts: [
        {
          name: "NAMU",
          data: fontData,
          style: "normal",
          weight: 400,
        },
      ],
    }
  );
}
